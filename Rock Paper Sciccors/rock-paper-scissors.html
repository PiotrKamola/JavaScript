<!DOCTYPE html>
<html>
  <head>
    <title>RockPaperScissors</title>
    
    <body>
      <p>Rock Paper Scissors</p>

      <button
        onclick="
          move = 0;
          playGame(move);
        ";>
        Rock
      </button>

      <button
        onclick="
          move = 1;
          playGame(move);
        ";>
        Paper
      </button>

      <button
        onclick="
          move = 2;
          playGame(move);
        ";>
        Scissors
      </button>

      <div id="moves"> </div>
      <div id="scores"> Wins = 0 | Loses = 0 | Ties = 0 </div>
    
      <button
        onclick="
          stats.wins = 0;
          stats.loses = 0;
          stats.ties = 0;
          localStorage.removeItem('stats');
          moves();
          changeScores();
        ";>
        Restart scores
      </button>

      <script>
        let stats = JSON.parse(localStorage.getItem('stats')) || {
            wins: 0,
            loses: 0,
            ties: 0
          }

        let move = 0;
        let moveStr;
        let enemyStr;
        let whoWin;

        function playGame(move){
          const enemy = Math.floor(Math.random() * 3)

          if(move === 0){
            moveStr = "Rock";
          }else if(move === 1){
            moveStr = "Paper";
          }else{
            moveStr = "Scissors";
          }

          if(enemy === 0){
            enemyStr = "Rock";
          }else if(enemy === 1){
            enemyStr = "Paper";
          }else{
            enemyStr = "Scissors";
          }
          
          
          if(move === enemy){
            stats.ties++;
            whoWin = "Tie";
          }else if(enemy === move+1){
            stats.loses++
            whoWin = "Lose";
          }else if(move == 2 && enemy == 0){
            stats.loses++;
            whoWin = "Lose";
          }else{
            stats.wins++
            whoWin = "Won";
          }

          moves(moveStr, enemyStr, whoWin);
          changeScores(moveStr, enemyStr, whoWin);
          localStorage.setItem('stats', JSON.stringify(stats));
        }

        function moves(move, enemy, whoWin){
          if(moves && enemy && whoWin){
            document.getElementById("moves").textContent = `You picked ${move}, computer picked ${enemy}, you ${whoWin}`;
          }else{
            document.getElementById("moves").textContent = `Scores has been restarted.`;
          }
        }
        function changeScores(move, enemy, whoWin){
          document.getElementById("scores").textContent = `Wins = ${stats.wins} | Loses = ${stats.loses} | Ties = ${stats.ties}\n`;
        }
      </script>
    </body>
  </head>
</html>
