<!DOCTYPE html>
<html>
  <style>
    body{
      text-align: center;
      background-color: gray;
    }
    .choosingImage{
      width:100px;
      height:100px;
    }
    .smallerImage{
      width:50px;
      height:50px;
      border-radius: 50%;
    }
    .winnerColor{
      background-color: green;
    }
    .looserColor{
      background-color: red;
    }
    .button_choose{
      border-radius: 50%;
      border: none;
      background-color: gray;
    }
    .hiddenText{
      display: none;
    }
  </style>
  <head>
    <title>RockPaperScissors</title>
    
    <body>
      <p>Rock Paper Scissors</p>

      <button
        class="button_choose"
        onclick="
          move = 0;
          playGame(move);
        ";>
        <img src="./images/rock.jpg" 
          class="choosingImage"
          alt="rock"/>
      </button>

      <button
        class="button_choose"
        onclick="
          move = 1;
          playGame(move);
        ";>
        <img src="./images/paper.jpg" 
          class="choosingImage"
          alt="paper"/>
      </button>

      <button
        class="button_choose"
        onclick="
          move = 2;
          playGame(move);
        ";>
        <img src="./images/scissors.jpg" 
          class="choosingImage"
          alt="scissors"/>
      </button>

      <p id="moves" class="hiddenText">
        You picked: <img id = "myMove" class="smallerImage" >
        Computer picked: <img id = "computerMove" class="smallerImage">
      </p>
      <p id="whoWonText" class="hiddenText">
      </p>
      <p id="resetScoresText" class="hiddenText">
        Scores has been restarted.
      </p>
      <p id="scores"> Wins = 0 | Loses = 0 | Ties = 0 </p>
    
      <button
        onclick="
          stats.wins = 0;
          stats.loses = 0;
          stats.ties = 0;
          localStorage.removeItem('stats');
          moves();
          changeScores();
        ";>
        Restart scores
      </button>

      <script>
        let stats = JSON.parse(localStorage.getItem('stats')) || {
            wins: 0,
            loses: 0,
            ties: 0
          }

        let move = 0;
        let moveStr;
        let enemyStr;
        let whoWin;

        function playGame(move){
          const enemy = Math.floor(Math.random() * 3)

          if(move === 0){
            moveStr = "Rock";
          }else if(move === 1){
            moveStr = "Paper";
          }else{
            moveStr = "Scissors";
          }

          if(enemy === 0){
            enemyStr = "Rock";
          }else if(enemy === 1){
            enemyStr = "Paper";
          }else{
            enemyStr = "Scissors";
          }
          
          
          if(move === enemy){
            stats.ties++;
            whoWin = "Tie";
          }else if(enemy === move+1){
            stats.loses++
            whoWin = "Lose";
          }else if(move == 2 && enemy == 0){
            stats.loses++;
            whoWin = "Lose";
          }else{
            stats.wins++
            whoWin = "Won";
          }

          moves(moveStr, enemyStr, whoWin);
          changeScores(moveStr, enemyStr, whoWin);
          localStorage.setItem('stats', JSON.stringify(stats));
        }

        function moves(move, enemy, whoWin){
          if(move && enemy && whoWin){
            document.getElementById("resetScoresText").classList.add("hiddenText");
            document.getElementById("moves").classList.remove("hiddenText");
            document.getElementById("whoWonText").classList.remove("hiddenText");

            if(move === "Rock"){
              document.getElementById("myMove").src="./images/rock.jpg";
            }else if (move === "Paper"){
              document.getElementById("myMove").src="./images/paper.jpg";
            }else{
              document.getElementById("myMove").src="./images/scissors.jpg";
            }

            if(enemy === "Rock"){
              document.getElementById("computerMove").src="./images/rock.jpg";
            }else if (enemy === "Paper"){
              document.getElementById("computerMove").src="./images/paper.jpg";
            }else{
              document.getElementById("computerMove").src="./images/scissors.jpg";
            }

            document.getElementById("myMove").classList.remove("winnerColor");
            document.getElementById("myMove").classList.remove("looserColor");
            document.getElementById("computerMove").classList.remove("winnerColor");
            document.getElementById("computerMove").classList.remove("looserColor");

            if(whoWin === "Won"){
              document.getElementById("myMove").classList.add("winnerColor");
              document.getElementById("computerMove").classList.add("looserColor");
              document.getElementById("whoWonText").innerHTML = "You Won";
            }else if (whoWin === "Lose"){
              document.getElementById("myMove").classList.add("looserColor");
              document.getElementById("computerMove").classList.add("winnerColor");
              document.getElementById("whoWonText").innerHTML = "You Lose";
            }else{
              document.getElementById("whoWonText").innerHTML = "You Tied";
            }

          }else{
            document.getElementById("moves").classList.add("hiddenText");
            document.getElementById("whoWonText").classList.add("hiddenText");
            document.getElementById("resetScoresText").classList.remove("hiddenText");
          }
        }

        function changeScores(move, enemy, whoWin){
          document.getElementById("scores")
            .textContent = `Wins = ${stats.wins} | Loses = ${stats.loses} | Ties = ${stats.ties}\n`;
        }
      </script>
    </body>
  </head>
</html>
